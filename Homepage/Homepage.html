<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <link rel="stylesheet" href="Homepage.css">
</head>

<body>

    <div class="mobile-screen">

        <header class="top-bar">
            <div class="menu-btn" onclick="bukaMenu()">
                <i class="fas fa-bars"></i>
            </div>

            <div class="logo-text">
                <span class="text-green">P</span><span class="text-black">O</span><span class="text-blue">S</span>
            </div>

            <div class="profile-icon">
                <i class="fas fa-store"></i>
            </div>
        </header>

        <div class="welcome-banner">
            <div class="banner-content">
                <p>Selamat Datang Di Aplikasi <span class="text-green fw-bold">P</span><span class="text-black fw-bold">O</span><span class="text-blue fw-bold">S</span></p>
                <p class="sub-text">Aplikasi Kasir Yang Memudahkan Transaksi Mu.</p>
            </div>
        </div>

        <div class="menu-grid">

            <div class="menu-card" onclick="window.location.href='../Transaksi/Scan.html'">
                <div class="icon-box blue-soft">
                    <i class="fas fa-file-invoice-dollar"></i>
                </div>
                <h3>Kasir</h3>
            </div>

            <div class="menu-card" onclick="window.location.href='../Laporan/Laporan.html'">
                <div class="icon-box blue-medium">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Laporan</h3>
            </div>

            <div class="menu-card full-center" onclick="window.location.href='../Informasi/informasi.html'">
                <div class="icon-box blue-solid">
                    <i class="fas fa-info"></i>
                </div>
                <h3>Informasi</h3>
            </div>

        </div>

    </div>
    <div id="menuOverlay" class="overlay" onclick="tutupMenu()"></div>

    <div id="sideMenu" class="sidebar">

        <div class="sidebar-header">
            <div class="profile-row">
                <div class="avatar-circle">MK</div>

                <div class="user-info">
                    <h4 id="sideName">Mike Den</h4>
                    <p id="sideEmail">mike.den@example.com</p>
                </div>

                <div class="dropdown-trigger" onclick="toggleLogout()">
                    <i class="fas fa-caret-down"></i>
                </div>
            </div>

            <div id="logoutBox" class="logout-popup" onclick="logout()">
                Logout
            </div>
        </div>

        <ul class="sidebar-links">
            <li onclick="bukaModalPanduan()">
                <i class="fas fa-book-open"></i>
                <span>PANDUAN</span>
            </li>

            <li onclick="hubungiDeveloper()">
                <i class="fas fa-headset"></i>
                <span>HUBUNGI KAMI</span>
            </li>

            <li onclick="bukaModalFeedback()">
                <i class="fas fa-comment-alt"></i>
                <span>FEEDBACK</span>
            </li>
        </ul>

    </div>
    <div id="modalPanduan" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h3 style="margin:0;">Panduan Aplikasi</h3>
                <i class="fas fa-times" onclick="tutupModal('modalPanduan')" style="cursor:pointer; font-size:18px;"></i>
            </div>

            <div class="guide-item">
                <h4>1. Menambah Produk</h4>
                <p>Masuk ke menu <b>Stok Barang</b>, klik tombol <b>Tambah Produk</b>. Anda bisa scan barcode atau input manual.</p>
            </div>

            <div class="guide-item">
                <h4>2. Melakukan Transaksi</h4>
                <p>Masuk ke menu <b>Kasir</b>, scan barang belanjaan, lalu klik <b>Selesaikan Order</b> untuk pembayaran.</p>
            </div>

            <div class="guide-item">
                <h4>3. Member & Poin</h4>
                <p>Saat checkout, klik <b>Buat Member</b> untuk mendaftarkan pelanggan agar mendapatkan poin.</p>
            </div>

            <button class="btn-popup btn-simpan" onclick="tutupModal('modalPanduan')" style="margin-top:10px;">Mengerti</button>
        </div>
    </div>

    <div id="modalFeedback" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="text-align: center;">
            <h3 style="margin-bottom: 10px;">Beri Nilai Aplikasi</h3>
            <p style="color:#666; font-size:13px; margin-bottom:20px;">Seberapa puas Anda menggunakan aplikasi POS ini?</p>

            <div class="star-container">
                <i class="fas fa-star" onclick="beriNilai(1)" id="star1"></i>
                <i class="fas fa-star" onclick="beriNilai(2)" id="star2"></i>
                <i class="fas fa-star" onclick="beriNilai(3)" id="star3"></i>
                <i class="fas fa-star" onclick="beriNilai(4)" id="star4"></i>
                <i class="fas fa-star" onclick="beriNilai(5)" id="star5"></i>
            </div>

            <textarea id="feedbackText" placeholder="Tulis masukan Anda disini..." rows="3"></textarea>

            <div class="modal-buttons-row" style="margin-top: 15px;">
                <button class="btn-popup btn-batal" onclick="tutupModal('modalFeedback')">Batal</button>
                <button class="btn-popup btn-simpan" onclick="kirimFeedback()">Kirim</button>
            </div>
        </div>
    </div>
    <script>
        // 1. Fungsi Buka/Tutup Menu
        function bukaMenu() {
            document.getElementById('sideMenu').classList.add('active');
            document.getElementById('menuOverlay').classList.add('active');
        }

        function tutupMenu() {
            document.getElementById('sideMenu').classList.remove('active');
            document.getElementById('menuOverlay').classList.remove('active');
            document.getElementById('logoutBox').style.display = 'none'; // Tutup juga logoutnya
        }

        // 2. Fungsi Toggle Logout (Klik Panah)
        function toggleLogout() {
            const box = document.getElementById('logoutBox');
            if (box.style.display === 'block') {
                box.style.display = 'none';
            } else {
                box.style.display = 'block';
            }
        }

        // 3. Fungsi Logout
        function logout() {
            if (confirm("Keluar dari aplikasi?")) {
                localStorage.removeItem('user_pos'); // Hapus sesi
                window.location.href = '../Login/Login.html';
            }
        }

        // 4. LOAD DATA USER (Otomatis ganti nama Mike Den jadi Nama Asli)
        window.onload = function() {
            const user = JSON.parse(localStorage.getItem('user_pos'));
            if (user) {
                document.getElementById('sideName').innerText = user.nama;
                document.getElementById('sideEmail').innerText = user.email;

                // Ambil inisial (Misal: Azhar -> AZ)
                const inisial = user.nama.substring(0, 2).toUpperCase();
                document.querySelector('.avatar-circle').innerText = inisial;
            }
        };
        // --- 1. LOGIKA MODAL UMUM ---
        function tutupModal(id) {
            document.getElementById(id).style.display = 'none';
        }

        // --- 2. FITUR PANDUAN ---
        function bukaModalPanduan() {
            tutupMenu(); // Tutup sidebar dulu
            document.getElementById('modalPanduan').style.display = 'flex';
        }

        // --- 3. FITUR HUBUNGI KAMI (WHATSAPP) ---
        function hubungiDeveloper() {
            // Ganti nomor ini dengan nomor WA kamu (Format: 628...)
            const nomorWA = "6281234567890";
            const pesan = "Halo Developer, saya butuh bantuan terkait Aplikasi POS.";

            // Buka WhatsApp
            const url = `https://wa.me/${nomorWA}?text=${encodeURIComponent(pesan)}`;
            window.open(url, '_blank');
        }

        // --- 4. FITUR FEEDBACK ---
        let ratingValue = 0;

        function bukaModalFeedback() {
            tutupMenu();
            document.getElementById('modalFeedback').style.display = 'flex';
            beriNilai(0); // Reset bintang
            document.getElementById('feedbackText').value = '';
        }

        function beriNilai(n) {
            ratingValue = n;
            for (let i = 1; i <= 5; i++) {
                const star = document.getElementById('star' + i);
                if (i <= n) {
                    star.classList.add('active'); // Kuning
                } else {
                    star.classList.remove('active'); // Abu
                }
            }
        }

        function kirimFeedback() {
            const komentar = document.getElementById('feedbackText').value;

            if (ratingValue === 0) {
                alert("Silakan pilih jumlah bintang dulu!");
                return;
            }

            // Simulasi Kirim (Nanti bisa dikirim ke Database)
            console.log(`Rating: ${ratingValue}, Pesan: ${komentar}`);

            alert("Terima kasih atas masukan Anda!");
            tutupModal('modalFeedback');
        }
    </script>
</body>

</html>